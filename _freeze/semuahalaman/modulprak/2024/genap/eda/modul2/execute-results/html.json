{
  "hash": "783acb094fa9eed3aa16cc4f78f34c19",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Pertemuan 2 : Data Cleaning with Pandas\"\nimage: static\\images\\pandas.jpg\ndescription: \"Handling Dirty Data using Pandas\"\ndate: 04/15/2024\npage-navigation: true\njupyter: python3\nformat: html\n---\n\n\n\n\nKembali ke [EDA](./eda2024genap.qmd)\n\n# Gathering Data\n\n<div style='text-align: justify;'>\nData yang kita terima seringkali tidak berupa 1 tabel yang lengkap berisi seluruh informasi yang dibutuhkan. Terkadang kita perlu menggabungkan 2 atau lebih data yang saling berhubungan. Pandas memiliki beberapa fungsi yang dapat kita gunakan untuk menggabungkan beberapa data tersebut.\n</div>\n\n## Concatenate & Merge\n\n### Concatenate\n\n<div style='text-align: justify;'>\nConcatenate digunakan untuk menggabungkan 2 atau lebih series/dataframe. Argumen `axis=` digunakan untuk mengatur opsi penggabungan data menurut index baris atau index kolom. Berikut contoh penggunaan pada 2 series :\n\n::: {#42a2ea86 .cell execution_count=1}\n``` {.python .cell-code}\nimport numpy as np\nimport pandas as pd\n\nseries1 = pd.Series(['a','b','c'])\nseries2 = pd.Series(['x','y','z'])\n```\n:::\n\n\n___\n`axis=0 (default)` akan menggabungkan data pada index **baris**.\n\n::: {#a4fb51ad .cell execution_count=2}\n``` {.python .cell-code}\npd.concat([series1,series2], axis=0)\n```\n:::\n\n\n___\n`axis=1` akan menggabungkan data pada index **kolom**.\n\n::: {#9d6e3b44 .cell execution_count=3}\n``` {.python .cell-code}\npd.concat([series1,series2], axis=1)\n```\n:::\n\n\n___\n`ignore_index=True` akan mengabaikan index awal dari masing-masing data sehingga hasil penggabungan memiliki index baru.\n\n::: {#5691698b .cell execution_count=4}\n``` {.python .cell-code}\npd.concat([series1,series2], ignore_index=True)\n```\n:::\n\n\n___\nKita dapat menambahkan `keys` sebagai penanda dari masing-masing series sebelum digabungkan.\n\n::: {#e5980249 .cell execution_count=5}\n``` {.python .cell-code}\npd.concat([series1,series2], keys=['Series 1','Series 2'])\n```\n:::\n\n\n:::{.callout-tip}\nHasil penggabungan dengan argumen `keys=` akan menambahkan keys sebagai index gabungan, sehingga pada contoh di atas, index dari masing-masing value adalah sebuah tuple yang merupakan pasangan index gabungan dan index masing-masing.\n\n::: {#b4f26966 .cell execution_count=6}\n``` {.python .cell-code}\npd.concat([series1,series2], keys=['Series 1','Series 2']).index\n```\n:::\n\n\n:::\n___\nBerikut contoh penggunaan pada DataFrame :\n\n::: {#cb7769f4 .cell execution_count=7}\n``` {.python .cell-code}\ndf1=pd.DataFrame({'col 1':['a','b','c'],'col 2':[0,1,2]})\ndf2=pd.DataFrame({'col 1':['x','y','z'],'col 2':[4,5,6]})\n```\n:::\n\n\n::: {#f7e043eb .cell execution_count=8}\n``` {.python .cell-code}\ndf1\n```\n:::\n\n\n::: {#f5edcc3f .cell execution_count=9}\n``` {.python .cell-code}\ndf2\n```\n:::\n\n\n___\n`axis=0 (default)` akan menggabungkan data pada index **baris**.\n\n::: {#eb7d41ef .cell execution_count=10}\n``` {.python .cell-code}\npd.concat([df1,df2])\n```\n:::\n\n\n___\n`axis=1` akan menggabungkan data pada index **kolom**.\n\n::: {#a9d1cdc4 .cell execution_count=11}\n``` {.python .cell-code}\npd.concat([df1,df2], axis=1)\n```\n:::\n\n\n___\nPerhatikan bahwa nama kolom `df1` dan `df2` sama. Misalkan kita menggabungkan 2 dataframe dengan nama kolom yang berbeda.\n\n::: {#36ab9b36 .cell execution_count=12}\n``` {.python .cell-code}\ndf3=pd.DataFrame({'col 2':[3,4,5],'col 3':['m','n','o']})\ndf3\n```\n:::\n\n\nConcatenate pada DataFrame melihat index kolom sebagai acuan untuk penggabungan pada `axis=0` (baris). \n\n::: {#eaa46049 .cell execution_count=13}\n``` {.python .cell-code}\npd.concat([df1,df3])\n```\n:::\n\n\nKarena `df1` dan `df3` memiliki nama kolom yang berbeda, maka terjadi penggabungan baris sekaligus kolom. \n\n___\nUntuk kolom yang beririsan, bisa menggunakan argumen `join=` untuk mengatur bagaimana penggabungan dilakukan (pada keseluruhan data atau pada data yang beririsan saja)\n\n::: {#baa29e1a .cell execution_count=14}\n``` {.python .cell-code}\npd.concat([df1,df3], join='inner') # df1 ⋂ df3\n```\n:::\n\n\n::: {#dcedb404 .cell execution_count=15}\n``` {.python .cell-code}\npd.concat([df1,df3], join='outer') # df1 ⋃ df3\n```\n:::\n\n\n</div>\n\n### Merge\n\n<div style='text-align: justify;'>\nFungsi merge pada pandas digunakan untuk menggabungkan 2 atau lebih dataframe berdasarkan index kolom tertentu.\n\n::: {#8b67558d .cell execution_count=16}\n``` {.python .cell-code}\nkaryawan = pd.DataFrame({'id':[1,2,3,4],'nama':['Joko','Alvin','Rafi','Lita']})\nkaryawan\n```\n:::\n\n\n::: {#fa781900 .cell execution_count=17}\n``` {.python .cell-code}\ngaji = pd.DataFrame({'id':[2,1,3,5,4,6],'gaji':[100.0,200.0,300.0,400.0,500.0,600.0]})\ngaji\n```\n:::\n\n\n::: {#f89a7c98 .cell execution_count=18}\n``` {.python .cell-code}\npd.merge(karyawan, gaji, on='id')\n```\n:::\n\n\nData nama karyawan dan gaji digabungkan dalam 1 dataframe, dengan nilai-nilai pada kolom id sebagai acuan.\n\n:::{.callout-note}\n## Merge & Join\nPada modul ini, hanya dibahas mengenai dasar penggunaan fungsi merge untuk menggabungkan dataset. Untuk penggunaan lebih spesifik dengan argumen `left=`, `right=`, `left_on=`, `right_on=` dan `how=` akan dibahas pada materi ***Data Wrangling***\n:::\n</div>\n\n# Assessing Data\n<div style='text-align: justify;'>\nSetelah memiliki data yang komplit, langkah selanjutnya adalah mengidentifikasi validitas data yang kita punya. Apakah data yang kita miliki sudah cukup baik? Apakah sudah bisa dilakukan analisis pada data yang ada? Perlukah perubahan dan perbaruan data?\n\nPertama, kita perlu melihat keberadaan **data yang buruk** dalam kumpulan data kita.\n\nData yang buruk dapat berupa:\n\n- Data dalam format yang salah (Data ***integer*** terbaca sebagai suatu ***string***)\n- Sel yang kosong (***Missing***)\n- Duplikat (Data yang sama muncul lebih dari 1 kali)\n- Data yang salah (Data yang tidak masuk akal. Misalnya seseorang berumur 600 tahun)\n</div>\n\n## df.info()\n<div style='text-align: justify;'>\n\nMethod `.info()` dapat digunakan untuk melihat informasi dasar suatu dataframe seperti **jumlah entri keseluruhan**, **nama kolom**, **jumlah nilai non-null tiap kolom**, **tipe data tiap kolom** hingga **penggunaan memori suatu dataframe**\n\nMisalkan kita gunakan dataset pokemon pada modul sebelumnya,\n\n::: {#95cb3a2b .cell execution_count=19}\n``` {.python .cell-code}\ndf = pd.read_csv('https://raw.githubusercontent.com/farhanage/dataset-for-study/main/pokemon_data.csv')\ndf.head()\n```\n:::\n\n\n::: {#c83b936a .cell execution_count=20}\n``` {.python .cell-code}\ndf.info()\n```\n:::\n\n\n</div>\n\n## Missing Values\n<div style='text-align: justify;'>\nTerdapat 2 tipe missing value.\n\n1. Data bernilai `NaN` (Not a Number)\n2. Data bernilai `0` (Null)\n\n:::{.callout-warning}\n## Null\nData bernilai 0 (Null) tidak selalu bersifat sebagai data yang hilang, bisa juga data memang memiliki data yang bernilai 0. Oleh karena itu, penting bagi kita untuk mengetahui konteks dari data yang dianalisis.\n:::\n___\n\n::: {#46577fbb .cell execution_count=21}\n``` {.python .cell-code}\ndf = pd.DataFrame({\"Evan\" : [np.nan,100,95,94,99],\"Boy\" : [100,np.nan,95,99,94],\"Maxwell\" : [95,100,99,np.nan,94]})\ndf\n```\n:::\n\n\nUntuk melihat data mana saja yang mengandung value `NaN` (Not a Number), kita gunakan method `.isna()` atau `.isnull()`. (Kedua method ini memiliki fungsi yang sama dan dapat digunakan secara bergantian/salah satu saja)\n\n::: {#35562e29 .cell execution_count=22}\n``` {.python .cell-code}\ndf.isna()\n```\n:::\n\n\nUntuk melihat jumlah value `NaN` pada data, tambahkan method `.sum()` pada kode di atas.\n\n::: {#e39f6428 .cell execution_count=23}\n``` {.python .cell-code}\ndf.isna().sum()\n```\n:::\n\n\n:::{.callout-note}\n## Method `.sum()`\nMethod `.sum()` digunakan untuk menjumlahkan nilai-nilai pada tiap kolom dataframe (Juga dalam suatu Series).\n:::\n\nUntuk melihat entri-entri yang memiliki nilai `NaN` pada kolom tertentu, lakukan *filtering* pada dataframe dengan `df['<nama-kolom>'].isna()` sebagai kondisi yang diinginkan.\n\n::: {#4e9fe4ef .cell execution_count=24}\n``` {.python .cell-code}\ndf[df['Evan'].isna()]   # Entri yang memiliki nilai `NaN` pada kolom `Evan`\n```\n:::\n\n\n</div>\n\n## Duplicates\n<div style='text-align: justify;'>\n\nData duplikat pada dataframe adalah entri yang memiliki nilai yang sama **pada setiap kolom**. Jika terdapat setidaknya 1 nilai kolom yang berbeda antara 2 entri, data tersebut bukanlah sebuah duplikat.\n\n::: {#f65064a3 .cell execution_count=25}\n``` {.python .cell-code}\ndf = pd.DataFrame({\n    \"id\" : [1,2,3,4,3,6],\n    \"Karyawan\" : ['Joko','Alvin','Rafi','Lita','Rafi','Jennie'],\n    \"Gaji\" : [100.0, 200.0, 300.0, 400.0, 300.0, 600.0]})\ndf\n```\n:::\n\n\nUntuk melihat data yang memiliki duplikat pada dataframe, kita gunakan method `.duplicated()`.\n\n::: {#742ccd6e .cell execution_count=26}\n``` {.python .cell-code}\ndf.duplicated()\n```\n:::\n\n\nPerhatikan bahwa data yang terbaca sebagai duplikat adalah data yang muncul setelah kemunculan data pertama kali (data duplikat pertama tidak dianggap sebagai duplikat)\n\nDengan cara yang sama seperti pada **Missing Value**, kita bisa menggunakan method `.sum()` untuk melihat jumlah data duplikat pada suatu dataframe.\n\n::: {#e8eb4764 .cell execution_count=27}\n``` {.python .cell-code}\ndf.duplicated().sum()\n```\n:::\n\n\nUntuk melihat entri-entri yang memiliki nilai duplikat pada kolom tertentu, lakukan *filtering* pada dataframe dengan `df['<nama-kolom>'].duplicated()` sebagai kondisi yang diinginkan.\n\n::: {#4135989a .cell execution_count=28}\n``` {.python .cell-code}\ndf[df['id'].duplicated()]   # Entri yang memiliki nilai `id` duplikat\n```\n:::\n\n\n</div>\n\n## Descriptive Statistics\n<div style='text-align: justify;'>\n\nUntuk mengidentifikasi apakah terdapat data yang salah, jika kita perlu tahu konteks data tersebut. Seperti bagaimana cara data diperoleh? Apakah ada batas-batas nilai pada variabel-variabel tertentu?\n\nSalah satu cara mudah untuk mengidentifikasi persebaran suatu data adalah dengan melihat statistik deskriptif suatu data. Kita bisa menggunakan method `.describe()` untuk melihat ukuran persebaran data dari masing-masing variabel pada suatu dataframe.\n\n::: {#e6e99aaa .cell execution_count=29}\n``` {.python .cell-code}\ndf = pd.read_csv('https://raw.githubusercontent.com/farhanage/dataset-for-study/main/pokemon_data.csv')\ndf.head()\n```\n:::\n\n\n::: {#c164aaa3 .cell execution_count=30}\n``` {.python .cell-code}\ndf.describe()\n```\n:::\n\n\nNamun, metode ini hanya dapat digunakan pada data numerik. Sehingga untuk data non-numerik, perlu pemahaman lebih lanjut mengenai konteks data dan metode yang digunakan untuk mengonfirmasi validitas data.\n\n</div>\n\n# Cleaning Data\n\n## Memperbaiki Format Data yang Salah\n<div style='text-align: justify;'>\n\nTerdapat lebih dari 1 cara untuk memperbaiki format data yang salah. Tidak disalahkan bagi anda untuk mencarinya di internet sendiri. Silakan merujuk pada berbagai sumber. Salah satunya adalah jawaban dari pertanyaan pada forum StackOverflow berikut : [Link](https://stackoverflow.com/questions/15891038/change-column-type-in-pandas)\n</div>\n\n## Mengimputasi sel yang kosong\n<div style='text-align: justify;'>\n\n::: {#fd70a57a .cell execution_count=31}\n``` {.python .cell-code}\ndf.fillna(value='<value>', inplace=True)\n```\n:::\n\n\n</div>\n\n## Menghapus data duplikat\n<div style='text-align: justify;'>\n\n::: {#405b3321 .cell execution_count=32}\n``` {.python .cell-code}\ndf.drop_duplicates(inplace=True)\n```\n:::\n\n\n</div>\n\n",
    "supporting": [
      "modul2_files"
    ],
    "filters": [],
    "includes": {}
  }
}
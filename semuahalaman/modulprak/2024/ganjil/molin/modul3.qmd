---
title: "Multiple linear model"
subtitle: "Multiple linear model"
image: static\Plot regresi.png
description: "Offline di Departemen Matematika"
date: 10/28/2024
page-navigation: true
format: html
editor: 
  markdown: 
    wrap: 72
---

Pengantar Model Regresi Linier Berganda Model regresi linier berganda digunakan untuk memprediksi nilai suatu variabel tergantung

$$Y = \beta_0 + \beta_1 X_1 + \beta_2 X_2 + \dots + \beta_n X_n + \epsilon$$

Di mana:

$ğ›½_0 $ :adalah intersep atau titik potong, 

$ğ›½_1,ğ›½_2,\dots,ğ›½_ğ‘$ adalah koefisien dari setiap variabel independen, dan $ğœ–$ adalah error atau residual.

Asumsi Model Model regresi linier berganda membutuhkan beberapa asumsi untuk menghasilkan estimasi yang valid:

- Linearitas: Hubungan antara variabel dependen dan independen harus linier. Independensi: Residual harus independen satu sama lain.

- Homoskedastisitas: Variansi residual harus konstan di seluruh pengamatan. Normalitas: Residual harus terdistribusi normal.

```{r}
library(car)
data("Salaries")
head(Salaries)
str(Salaries)

model_1var <- lm(salary~yrs.since.phd, data = Salaries) 
summary(model_1var)

model_0 <- lm(salary~ 0+yrs.since.phd, data = Salaries)
summary(model_0)

model_2var <- lm(salary~yrs.since.phd + yrs.service, data = Salaries) 
summary(model_2var)
```


```{r}
#bikin dummmy variabel manual
df <- Salaries
df$Male <- ifelse(df$sex == 'Male', 1, 0) 
View(df)

model1 <- lm(salary~yrs.since.phd + yrs.service + Male, data=df)
summary(model1)

#bikin dummy variabel pake package
library(fastDummies)
dataf <- dummy_cols(Salaries,select_columns ='sex')
head(dataf)

model2<- lm(salary~yrs.since.phd + yrs.service + sex_Male, data=dataf)
summary(model2)

#tanpa buat dummy variabel
model3 <-lm(salary~yrs.since.phd + yrs.service + sex, data=Salaries)
summary(model3)

#ganti base level
Salaries$sex <- relevel(Salaries$sex, ref='Male')

model4 <-lm(salary~yrs.since.phd + yrs.service + relevel(sex, ref='Male'), data=Salaries)
summary(model4)
```

```{r}
library(readxl)
datareg <- read_excel("raw.githubusercontent.com/aslab-math-ui/modul-prak/refs/heads/main/semuahalaman/modulprak/2024/ganjil/molin/datasets/datareg.xlsx")
View(datareg)
plot(datareg$gaji, datareg$kesenangan)

#Model linear (orde 1)
linearModel <- lm(kesenangan ~ gaji, data=datareg)
summary(linearModel)

#Model Kuadratik (orde 2)
datareg$gajikuadrat <- datareg$gaji^2
View(datareg)

modelkuadratik <- lm(kesenangan~gaji + gajikuadrat, data=datareg)
modelkuadratik <- lm(kesenangan~gaji + I(gaji^2), data=datareg)
summary(modelkuadratik)

#Model Kubik (orde 3)
datareg$gajikubik <- datareg$gaji^3
modelkubik <- lm(kesenangan~gaji + gajikuadrat + gajikubik, data=datareg)
modelkubik <- lm(kesenangan~gaji + I(gaji^2) + I(gaji^3), data=datareg)
summary(modelkubik)

#Compare model kuadratik sama kubik
anova(modelkuadratik,modelkubik)


#plot regresi 
plot(datareg$gaji, datareg$kesenangan)
#Mengeluarkan nilai gaji
nilaigaji <- seq(0, 60, 0.1)
#Mengeluarkan nilai prediksi dari model kuadratik
predkesenangan <- predict(modelkuadratik,list(gaji=nilaigaji, gajikuadrat=nilaigaji^2))
#Mengeluarkan Plot dengan garis
lines(nilaigaji, predkesenangan, col='red')
```
Model Interaksi Interaksi memungkinkan kita untuk menguji apakah efek dari satu variabel independen pada $ğ‘Œ$ dipengaruhi oleh variabel independen lain. Model interaksi dapat dituliskan sebagai:

$$ğ‘Œ=ğ›½_0 +ğ›½_1 ğ‘‹_1 + ğ›½_2ğ‘‹_2 +ğ›½_3(ğ‘‹_1Ã—ğ‘‹_2)+ğœ–$$

Koefisien $ğ›½_3$ menunjukkan efek interaksi antara $ğ‘‹_1$ dan $ğ‘‹_2$ .

Transformasi Variabel Jika asumsi linearitas atau homoskedastisitas tidak terpenuhi, transformasi variabel dapat membantu. Contoh transformasi yang sering digunakan meliputi:

- **Logaritma** untuk mengatasi ketidakseimbangan skala. 
- **Kuadrat atau akar** untuk mengurangi heteroskedastisitas.

Pengujian Model Dalam mengevaluasi model, kita biasanya menggunakan beberapa metrik:

- **R-squared ( $ğ‘…^2$ )**: Mengukur proporsi variabilitas $ğ‘Œ$ yang dapat dijelaskan oleh model. 

- **Adjusted $ğ‘…^2$** : Mengoreksi nilai $ğ‘…^2$ dengan mempertimbangkan jumlah variabel independen. 

- **F-Test**: Untuk menguji apakah setidaknya satu dari variabel independen berkontribusi signifikan terhadap prediksi $Y$.
